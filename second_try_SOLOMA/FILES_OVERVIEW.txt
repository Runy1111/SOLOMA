📁 ОБЗОР ФАЙЛОВ ПРОЕКТА
═══════════════════════════════════════════════════════════════════

Кратко: проект — телеграм‑бот для модерации с набором автономных агентов, использующих локальные эвристики и LLM (GigaChat) для анализа.

── ОСНОВНЫЕ ФАЙЛЫ (корень проекта):

├── main.py
│   Главный исполняемый файл — точка входа бота и тестового режима. Инициализирует агентов, настраивает обработчики сообщений и логику маршрутизации (спам → модерация → коррекция/аналоги).
│
├── gigachat_client.py
│   Асинхронный клиент для GigaChat API: authenticate(), generate(), close(). Используется всеми агентами для вызова LLM.
│
├── requirements.txt
│   Python‑зависимости проекта (см. ниже).
│
├── README.md
│   Документация: архитектура, инструкции по установке и запуску, краткое описание агентов и потоков.
│
├── FILES_OVERVIEW.txt
│   Этот файл — компактный обзор структуры проекта.
│
├── PROJECT_SUMMARY.txt
│   Итоговый сводный отчёт по проекту и результатам тестирования.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

── МОДУЛИ АГЕНТОВ (папка `agents/`):

├── agents/agent_moderator.py
│   Модератор‑координатор. Основная логика классификации (CLEAN / CATEGORY_A / CATEGORY_B / CATEGORY_C). Содержит:
│    - локальные эвристики (фильтры токенов, поиск ФИО/псевдонимов, транслит + fuzzy),
│    - парсинг ответа LLM и дополнительные безопасные меры (downgrade если нет локальных доказательств).
│
├── agents/agent_alternatives.py
│   Поиск альтернатив (аналогов) для ссылок/сервисов. Вызывает LLM для краткой категоризации и подбора аналогов.
│
├── agents/agent_corrector.py
│   Корректор стиля/мягчитель: исправляет орфографию/смягчает формулировки (использует GigaChat).
│
├── agents/agent_spellchecker.py
│   Спеллчекер: проверяет орфографию/пунктуацию и возвращает компактный ответ (NO_ERRORS / CORRECTED + исправленный текст).
│
├── agents/agent_spam_detector.py
│   Детектор спама: хранит последние N сообщений (по умолчанию 10) и использует SequenceMatcher для обнаружения дубликатов/очень похожих сообщений.

━━━━━━━━━━━━━━━━════════════════════════════════════════━━━━━━━

── ХРАНИЛИЩЕ ДАННЫХ (папка `storage/`):

├── storage/storage.py
│   JSON‑based storage: управление нарушениями, банами и историей сообщений. Создаёт файлы в `data/` при необходимости.

━━━━━━━━━━━━━━━━━━━━━━━━════════════════════════════════━━━━━━━

── КОНФИГУРАЦИЯ И УТИЛИТЫ:

├── config/settings.py
│   Конфигурационные параметры: TELEGRAM_TOKEN, GIGACHAT_CLIENT_ID/AUTH_KEY, пороги и пути хранения.

├── utils/logger.py
│   Настройка логирования (файл + консоль).

━━━━━━━━━━━━━━━━════════════════════════════════════════━━━━━━━

── ТЕСТЫ И РАННЕРЫ (папка `tests/`):

├── tests/run_test_pipeline.py
│   Скрипт для пакетного прогона тестовых кейсов (mock/live). Пишет метрики в `tests/output/` и закрывает клиенты корректно.

├── tests/data/ (набор JSON с тестовыми сообщениями)
│   Могут присутствовать несколько вариантов (малые наборы и набор из 100 кейсов).

├── небольшие локальные скрипты/ноутбуки для отладки агентов

━━━━━━━━━━━━━━━━════════════════════════════════════════━━━━━━━

── СОЗДАВАЕМЫЕ ПРИ РАБОТЕ ФАЙЛЫ (data/ и логи):

data/
├── violations.json     (История нарушений)
├── bans.json           (Список забанённых)
└── messages.json       (История сообщений)

logs.txt               (Лог операций)
.env                   (Файл конфигурации — пользователь создаёт сам)

═══════════════════════════════════════════════════════════════════

Кратко: код организован по агентной архитектуре, с явным разделением обязанностей между модератором, спеллчекером, корректором и спам‑детектором. Есть runner для оффлайн/онлайн тестирования и простое JSON‑хранилище для состояния.
